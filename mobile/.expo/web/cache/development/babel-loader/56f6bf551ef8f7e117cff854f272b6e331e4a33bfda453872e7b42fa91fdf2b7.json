{"ast":null,"code":"var $d796e7157ac96470$exports = require(\"./getScrollParent.main.js\");\nvar $1254e5bb94ac8761$exports = require(\"./useEffectEvent.main.js\");\nvar $78605a5d7424e31b$exports = require(\"./useLayoutEffect.main.js\");\nvar $8Ncyo$react = require(\"react\");\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {\n    get: v,\n    set: s,\n    enumerable: true,\n    configurable: true\n  });\n}\n$parcel$export(module.exports, \"useLoadMoreSentinel\", function () {\n  return $f6a4874a7c582761$export$ccaea96c28e8b9e7;\n});\nfunction $f6a4874a7c582761$export$ccaea96c28e8b9e7(props, ref) {\n  var collection = props.collection,\n    onLoadMore = props.onLoadMore,\n    _props$scrollOffset = props.scrollOffset,\n    scrollOffset = _props$scrollOffset === void 0 ? 1 : _props$scrollOffset;\n  var sentinelObserver = (0, $8Ncyo$react.useRef)(null);\n  var triggerLoadMore = (0, $1254e5bb94ac8761$exports.useEffectEvent)(function (entries) {\n    for (var entry of entries) if (entry.isIntersecting && onLoadMore) onLoadMore();\n  });\n  (0, $78605a5d7424e31b$exports.useLayoutEffect)(function () {\n    if (ref.current) {\n      sentinelObserver.current = new IntersectionObserver(triggerLoadMore, {\n        root: (0, $d796e7157ac96470$exports.getScrollParent)(ref === null || ref === void 0 ? void 0 : ref.current),\n        rootMargin: `0px ${100 * scrollOffset}% ${100 * scrollOffset}% ${100 * scrollOffset}%`\n      });\n      sentinelObserver.current.observe(ref.current);\n    }\n    return function () {\n      if (sentinelObserver.current) sentinelObserver.current.disconnect();\n    };\n  }, [collection, triggerLoadMore, ref, scrollOffset]);\n}","map":{"version":3,"names":["$f6a4874a7c582761$export$ccaea96c28e8b9e7","props","ref","collection","onLoadMore","_props$scrollOffset","scrollOffset","sentinelObserver","$8Ncyo$react","useRef","triggerLoadMore","$1254e5bb94ac8761$exports","useEffectEvent","entries","entry","isIntersecting","$78605a5d7424e31b$exports","useLayoutEffect","current","IntersectionObserver","root","$d796e7157ac96470$exports","getScrollParent","rootMargin","observe","disconnect"],"sources":["D:\\Programming\\Systems\\Hybrid-Systems\\RespondaPH\\mobile\\node_modules\\@react-aria\\utils\\dist\\packages\\@react-aria\\utils\\src\\useLoadMoreSentinel.ts"],"sourcesContent":["/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport type {AsyncLoadable, Collection} from '@react-types/shared';\nimport {getScrollParent} from './getScrollParent';\nimport {RefObject, useRef} from 'react';\nimport {useEffectEvent} from './useEffectEvent';\nimport {useLayoutEffect} from './useLayoutEffect';\n\nexport interface LoadMoreSentinelProps extends Omit<AsyncLoadable, 'isLoading'> {\n  collection: Collection<any>,\n  /**\n   * The amount of offset from the bottom of your scrollable region that should trigger load more.\n   * Uses a percentage value relative to the scroll body's client height. Load more is then triggered\n   * when your current scroll position's distance from the bottom of the currently loaded list of items is less than\n   * or equal to the provided value. (e.g. 1 = 100% of the scroll region's height).\n   * @default 1\n   */\n  scrollOffset?: number\n}\n\nexport function useLoadMoreSentinel(props: LoadMoreSentinelProps, ref: RefObject<HTMLElement | null>): void {\n  let {collection, onLoadMore, scrollOffset = 1} = props;\n\n  let sentinelObserver = useRef<IntersectionObserver>(null);\n\n  let triggerLoadMore = useEffectEvent((entries: IntersectionObserverEntry[]) => {\n    // Use \"isIntersecting\" over an equality check of 0 since it seems like there is cases where\n    // a intersection ratio of 0 can be reported when isIntersecting is actually true\n    for (let entry of entries) {\n      // Note that this will be called if the collection changes, even if onLoadMore was already called and is being processed.\n      // Up to user discretion as to how to handle these multiple onLoadMore calls\n      if (entry.isIntersecting && onLoadMore) {\n        onLoadMore();\n      }\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (ref.current) {\n      // Tear down and set up a new IntersectionObserver when the collection changes so that we can properly trigger additional loadMores if there is room for more items\n      // Need to do this tear down and set up since using a large rootMargin will mean the observer's callback isn't called even when scrolling the item into view beause its visibility hasn't actually changed\n      // https://codesandbox.io/p/sandbox/magical-swanson-dhgp89?file=%2Fsrc%2FApp.js%3A21%2C21\n      sentinelObserver.current = new IntersectionObserver(triggerLoadMore, {root: getScrollParent(ref?.current) as HTMLElement, rootMargin: `0px ${100 * scrollOffset}% ${100 * scrollOffset}% ${100 * scrollOffset}%`});\n      sentinelObserver.current.observe(ref.current);\n    }\n\n    return () => {\n      if (sentinelObserver.current) {\n        sentinelObserver.current.disconnect();\n      }\n    };\n  }, [collection, triggerLoadMore, ref, scrollOffset]);\n}\n"],"mappings":";;;;;;;;;;;;;;;AA8BO,SAASA,0CAAoBC,KAA4B,EAAEC,GAAkC;EAClG,IAAKC,UAAU,GAAkCF,KAAA,CAA7CE,UAAA;IAAaC,UAAU,GAAsBH,KAAA,CAAlCG,UAAA;IAAAC,mBAAA,GAAkCJ,KAAA,CAAtBK,YAAA;IAAEA,YAAA,GAAAD,mBAAA,cAAe,IAAAA,mBAAA;EAE5C,IAAIE,gBAAA,GAAmB,IAAAC,YAAA,CAAAC,MAAK,EAAwB;EAEpD,IAAIC,eAAA,GAAkB,IAAAC,yBAAA,CAAAC,cAAa,EAAE,UAACC,OAAA;IAGpC,KAAK,IAAIC,KAAA,IAASD,OAAA,EAGhB,IAAIC,KAAA,CAAMC,cAAc,IAAIX,UAAA,EAC1BA,UAAA;EAGN;EAEA,IAAAY,yBAAA,CAAAC,eAAc,EAAE;IACd,IAAIf,GAAA,CAAIgB,OAAO,EAAE;MAIfX,gBAAA,CAAiBW,OAAO,GAAG,IAAIC,oBAAA,CAAqBT,eAAA,EAAiB;QAACU,IAAA,EAAM,IAAAC,yBAAA,CAAAC,eAAc,EAAEpB,GAAA,aAAAA,GAAA,uBAAAA,GAAA,CAAKgB,OAAO;QAAkBK,UAAA,EAAY,OAAO,MAAMjB,YAAA,KAAiB,MAAMA,YAAA,KAAiB,MAAMA,YAAA;MAAe;MAChNC,gBAAA,CAAiBW,OAAO,CAACM,OAAO,CAACtB,GAAA,CAAIgB,OAAO;IAC9C;IAEA,OAAO;MACL,IAAIX,gBAAA,CAAiBW,OAAO,EAC1BX,gBAAA,CAAiBW,OAAO,CAACO,UAAU;IAEvC;EACF,GAAG,CAACtB,UAAA,EAAYO,eAAA,EAAiBR,GAAA,EAAKI,YAAA,CAAa;AACrD","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}